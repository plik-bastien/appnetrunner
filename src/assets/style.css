@tailwind base; @tailwind components; @tailwind utilities;

/* Layout */
.main-screen { min-height: 100dvh; height: 100dvh; display:flex; flex-direction:column; }
.section-inner{ height:100%; display:flex; align-items:center; justify-content:center; padding-inline:8px; padding-block: clamp(6px, 1.6dvh, 14px); }
.board{ width:100%; max-width:520px; }
.board .grid{ row-gap:8px; }

/* Backgrounds */
.bg-corp-skin{ background: radial-gradient(1200px 600px at 50% 10%, rgba(0,229,255,0.15), transparent 60%), linear-gradient(180deg,#0b1b24 0%,#08131a 100%); }
.bg-runner-skin{ background: radial-gradient(1200px 600px at 50% 90%, rgba(255,45,45,0.18), transparent 60%), linear-gradient(180deg,#1a0c0e 0%,#12080a 100%); }

/* Panels */
:root{ --cp-notch:14px; }
.cp-panel{
  position:relative;
  background: linear-gradient(180deg, rgba(16,31,43,0.9), rgba(10,16,21,0.9));
  border:1px solid #102532;
  box-shadow: 0 0 0 2px rgba(252,238,9,0.15), 0 0 25px rgba(0,229,255,0.15);
  clip-path: polygon(0% var(--cp-notch), var(--cp-notch) 0%, 100% 0%, 100% calc(100% - var(--cp-notch)), calc(100% - var(--cp-notch)) 100%, 0% 100%);
}
.cp-panel::before{ content:""; position:absolute; inset:0; clip-path:inherit; border:1px solid rgba(0,229,255,0.25); pointer-events:none; }
.cp-grid{
  background-image: linear-gradient(to right, rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(to bottom, rgba(255,255,255,0.03) 1px, transparent 1px);
  background-size:32px 32px,32px 32px;
}
.cp-title{ text-transform:uppercase; font-size:0.70rem; letter-spacing:.12em; color:#00e5ff; }
.separator{ height:1px; background: linear-gradient(90deg, rgba(252,238,9,0.35), rgba(0,229,255,0.35)); opacity:.5; }

/* Runner overrides */
.theme-runner .cp-title{ color:#ff2d2d; }
.theme-runner .separator{ background: linear-gradient(90deg, rgba(255,45,45,0.35), rgba(122,17,17,0.35)); }
.theme-runner .cp-panel::before{ border-color: rgba(255,45,45,0.28); }
.theme-runner .cp-panel{ box-shadow: 0 0 0 2px rgba(255,45,45,0.10), 0 0 25px rgba(255,45,45,0.18); }

/* Modal (scoped) */
.side-wrap { position: relative; width: 100%; height: 100%; isolation: isolate; display: flex; justify-content: center; align-items: center; }
.side-modal-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,.65); }
.side-modal { position: absolute; inset: 0; display:flex; align-items:center; justify-content:center; padding: 12px; }
.cp-modal{ position:relative; padding:16px; background: linear-gradient(180deg, rgba(16,31,43,0.96), rgba(10,16,21,0.96)); border:1px solid #102532; clip-path: polygon(0% var(--cp-notch), var(--cp-notch) 0%, 100% 0%, 100% calc(100% - var(--cp-notch)), calc(100% - var(--cp-notch)) 100%, 0% 100%); }

/* Pressed tile */
.tile-pressed { transform: translateY(1px) scale(0.997); box-shadow: 0 0 0 2px rgba(252,238,9,0.12), 0 0 12px rgba(0,229,255,0.12) inset; opacity: 0.98; }

/* Banner + layout */
.mid-banner {
  height: 40px; background: #000; display:flex; align-items:center; justify-content:center;
  position: relative; border-top: 1px solid rgba(255,255,255,0.08); border-bottom: 1px solid rgba(255,255,255,0.08);
}
.mid-banner__title { font-family:'Rajdhani',system-ui,sans-serif; font-weight:700; letter-spacing:.18em; text-transform:uppercase; font-size:0.9rem; color:#f1f5f9; }
.mid-banner__reset { position:absolute; right:8px; top:50%; transform:translateY(-50%); }
.mid-banner__btn { display:inline-flex; align-items:center; justify-content:center; width:34px; height:28px; border-radius:8px; background:#111; border:1px solid rgba(255,255,255,0.18); box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06); color:#fcee09; }

.half-corp { flex: 0 0 45%; min-height: 200px; max-height: 48vh; overflow:hidden; }
.half-runner { flex: 1 1 55%; min-height: 240px; max-height: 58vh; overflow:hidden; }

/* Splash transitions */
.splash-fade-enter-active, .splash-fade-leave-active { transition: opacity .28s ease; }
.splash-fade-enter-from, .splash-fade-leave-to { opacity: 0; }


/* === Rotor : pivote le contenu en paysage === */
.rotor-wrap {
  position: relative;
  width: 100%;
  height: 100%;
  isolation: isolate;
  overflow: hidden;
}
.rotor {
  position: absolute;
  left: 50%;
  top: 50%;
  transform-origin: center center;
  transform: translate(-50%, -50%);
}
.rotor > .side-wrap,
.rotor .board {
  max-width: 560px;
}
@media (orientation: landscape) {
  .rotor--runner { transform: translate(-50%, -50%); }
  .rotor--corp { transform: translate(-50%, -50%); }
  .mid-banner {
    position: fixed;
    top: 0; left: 0; right: 0;
    height: 40px;
    z-index: 40;
    border-bottom: 1px solid rgba(255,255,255,0.08);
  }
  .main-screen { flex-direction: row; }
  .half-corp, .half-runner {
    flex: 1 1 0%;
    min-height: 100dvh;
    max-height: 100dvh;
  }
}
@media (orientation: portrait) {
  .half-corp { transform: none; }
}


/* ===== Scroll uniquement en paysage + bandeau fixé ===== */

/* En portrait : pas de scroll, on cale à la hauteur de l'écran */
@media (orientation: portrait) {
  html, body, .main-screen { height: 100dvh; overflow: hidden; }
}

/* En paysage : on autorise le scroll vertical global,
   on réserve la place du bandeau (40px) et on limite un minimum de hauteur
   pour forcer l'apparition du scroll si nécessaire. */
@media (orientation: landscape) {
  html, body { height: auto; overflow-y: auto; }

  /* Bandeau déjà en position: fixed; height: 40px; (déclaré plus haut) */
  .main-screen {
    padding-top: 40px;         /* éviter que le contenu passe sous le bandeau */
    min-height: 1100px;        /* min raisonnable -> le scroll apparaît si contenu plus grand */
  }

  /* Les panneaux gauche/droite prennent au moins toute la hauteur visible moins le bandeau,
     mais peuvent s'étirer si le contenu dépasse (scroll global). */
  .half-corp, .half-runner {
    height: auto;
    min-height: calc(100dvh - 40px);
  }
}


/* Left menu button holder in banner */
.mid-banner__gear { position:absolute; left:12px; top:50%; transform:translateY(-50%); }



/* ===== ORIENTATION LAYOUT (CLEAN) ===== */

/* Landscape: side-by-side, pas de rotation, bandeau fixe en haut + scroll global */
@media (orientation: landscape) {
  .main-screen { 
    flex-direction: row;
    padding-top: 40px;            /* ne pas passer sous le bandeau */
  }

  .half-corp, .half-runner {
    flex: 1 1 0%;
    height: auto;
    min-height: calc(100dvh - 40px);
    max-height: 100dvh;
  }

  /* Les rotors restent droits en landscape (pas de rotate) */
  .rotor--runner,
  .rotor--corp {
    transform: translate(-50%, -50%) !important;
  }

  /* Bandeau fixe (si pas déjà défini plus haut) */
  .mid-banner {
    position: fixed;
    top: 0; left: 0; right: 0;
    height: 40px;
    z-index: 40;
    border-bottom: 1px solid rgba(255,255,255,0.08);
  }

  /* Scroll uniquement en paysage */
  html, body { height: auto; overflow-y: auto; }
}

/* Portrait: face-à-face avec logique "inverse" demandée
   - Par défaut (non inversé) : Runner pivoté 180°, Corpo droite
   - Inversé (Runner en haut) : Corpo pivotée 180°, Runner droit
   + pas de scroll */
@media (orientation: portrait) {
  /* Par défaut : Corp droite */
  .half-corp { transform: none !important; }

  /* Par défaut : Runner pivoté */
  .rotor--runner { transform: translate(-50%, -50%) rotate(180deg) !important; }

  /* Quand inversé (Runner en haut) */
  .is-swapped .rotor--runner { transform: translate(-50%, -50%) !important; }
  .is-swapped .half-corp     { transform: rotate(180deg) !important; }

  /* Pas de scroll en portrait */
  html, body, .main-screen { height: 100dvh; overflow: hidden; }
}
